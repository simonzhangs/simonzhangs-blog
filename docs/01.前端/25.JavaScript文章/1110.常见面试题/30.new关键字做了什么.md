---
title: JS中在new的时候发生了什么
date: 2022-03-29 20:54:25
permalink: /pages/96800e/
categories:
  - 《JavaScript面试问题》
tags:
  - 
---

1. 创建了一个新的对象；
2. 链接到构造函数的原型上；
3. 绑定this指向；
4. 返回这个对象。

```js
function _new() {
  let obj = {};
  let Con = [].shift.call(arguments);
  obj.__proto__ = Con.prototype;
  let result = Con.apply(obj, arguments);
  return typeof obj === "object" ? obj : {};
}
```

```js
function Person(name,age) {
  this.name = name;
  this.age = age;
}

function _new() {
  var args = [].slice.call(arguments);
  var constructor = args.shift();
  var context = Object.create(constructor.prototype);
  var result = constructor.apply(context, args);
  return (typeof result === 'object' && result != null) ? result : context;
}

var actor = _new(Person,'张三',28);
```

:::tip
arguments是类数组对象，它是用来存储实参的，而且有存储顺序，也具备和数组相同的访问性质和方式，拥有数组的长度属性length。用来存储实际传递给函数的参数。

具有callee属性，返回正被执行的Function对象；

可以通过slice来讲arguments转换为真实的数组：
1. `Array.prototype.slice.call(arguments)`；
2. `[].slice.call(arguments)`
3. `Array.from(arguments)`
4. `[...arguments]`

arguments和函数相关联，其只有在函数执行时可用，不能显示创建。
:::

Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。

---
参考链接：
1. [JS的arguments](https://juejin.cn/post/6844903998504337422)
2. [Object.create()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create)